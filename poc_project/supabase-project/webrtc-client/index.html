<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebRTC 음성 통화 클라이언트</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>🎤 WebRTC 음성 통화</h1>
            <p>Supabase Realtime을 활용한 실시간 음성 통화</p>
        </header>

        <main>
            <!-- 방 설정 섹션 -->
            <section class="room-section" id="roomSection">
                <h2>방 설정</h2>
                <div class="form-group">
                    <label for="roomId">방 ID:</label>
                    <input type="text" id="roomId" placeholder="방 ID를 입력하세요" value="test-room">
                </div>
                <div class="form-group">
                    <label for="userId">사용자 ID:</label>
                    <input type="text" id="userId" placeholder="사용자 ID를 입력하세요" value="user-1">
                </div>
                <button id="joinRoomBtn" class="btn btn-primary">방 참여</button>
            </section>

            <!-- 통화 섹션 -->
            <section class="call-section" id="callSection" style="display: none;">
                <h2>통화 중</h2>
                <div class="call-info">
                    <p>방 ID: <span id="currentRoomId"></span></p>
                    <p>사용자 ID: <span id="currentUserId"></span></p>
                    <p>연결 상태: <span id="connectionStatus">연결 중...</span></p>
                </div>

                <div class="audio-controls">
                    <div class="audio-visualizer">
                        <canvas id="audioVisualizer" width="300" height="100"></canvas>
                    </div>
                    <div class="control-buttons">
                        <button id="muteBtn" class="btn btn-secondary">🔇 음소거</button>
                        <button id="endCallBtn" class="btn btn-danger">📞 통화 종료</button>
                    </div>
                </div>

                <div class="logs">
                    <h3>연결 로그</h3>
                    <div id="logs" class="log-container"></div>
                </div>
            </section>

            <!-- 설정 섹션 -->
            <section class="settings-section">
                <h2>설정</h2>
                <div class="form-group">
                    <label for="turnServer">TURN 서버:</label>
                    <input type="text" id="turnServer" value="localhost:3478" readonly>
                </div>
                <div class="form-group">
                    <label for="turnUsername">TURN 사용자명:</label>
                    <input type="text" id="turnUsername" value="testuser" readonly>
                </div>
                <div class="form-group">
                    <label for="turnPassword">TURN 비밀번호:</label>
                    <input type="password" id="turnPassword" value="testpass" readonly>
                </div>
            </section>
        </main>
    </div>

    <script src="supabase-config.js"></script>
    <script src="client.js"></script>
</body>
</html>
